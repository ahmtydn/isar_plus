---
title: Şema
description: Isar koleksiyonlarıyla veri modellerinizi tanımlayın
icon: Database
---

import { Callout } from "fumadocs-ui/components/callout";
import { Tabs, Tab } from "fumadocs-ui/components/tabs";

# Şema

Isar ile uygulama verinizi sakladığınızda koleksiyonlarla çalışırsınız. Koleksiyon, veritabanı tablosu gibidir ve yalnızca tek bir Dart nesne türünü içerebilir.

## Koleksiyonun Anatomisi

Her Isar koleksiyonunu `@collection` veya `@Collection()` ile anotasyonlayarak tanımlarsınız.

```dart
@collection
class User {
  Id? id;

  String? firstName;

  String? lastName;
}
```

<Callout>
  Bir alanı kalıcı kılmak için Isar'ın ona erişebilmesi gerekir. Alanı public
  yapın veya getter/setter sağlayın.
</Callout>

## Veri Türleri

Isar aşağıdaki veri türlerini destekler:

### Primitif Türler

```dart
@collection
class PrimitiveTypes {
  PrimitiveTypes(this.id);

  final int id;

  bool? boolValue;
  int? intValue;
  double? doubleValue;
  DateTime? dateValue;
  String? stringValue;
}
```

### Listeler

```dart
@collection
class ListTypes {
  ListTypes(this.id);

  final int id;

  List<bool>? boolList;
  List<int>? intList;
  List<double>? doubleList;
  List<DateTime>? dateList;
  List<String>? stringList;
}
```

<Callout type="warning">
  Listeler null değer içeremez. Bunun yerine nullable türler kullanın.
</Callout>

### Enum'lar

Isar Plus, Dart enum'larını iki depolama stratejisiyle destekler:

<Tabs items={['Ordinal (Varsayılan)', 'Özel Değer']}>
  <Tab value="Ordinal (Varsayılan)">
    Varsayılan olarak, enum'lar indekslerine (ordinal) göre depolanır. Herhangi bir annotation olmadan enum'u doğrudan kullanın:

    ```dart
    enum Status { active, inactive, pending }

    @collection
    class Task {
      Task(this.id);

      final int id;

      Status? status; // 0, 1 veya 2 olarak depolanır
    }
    ```

    Depolanan değerler:
    - `Status.active` → `0`
    - `Status.inactive` → `1`
    - `Status.pending` → `2`

    <Callout type="warning">
      Enum değerlerinin sırasını değiştirirseniz, mevcut depolanan veriler farklı enum değerlerine eşlenecektir. Kararlılık için yeni değerleri sona ekleyin veya özel değerler kullanın.
    </Callout>

  </Tab>
  <Tab value="Özel Değer">
    Daha fazla kontrol için, enum'unuzda bir alan tanımlayın ve `@enumValue` ile işaretleyin. Bu alanın değeri depolama için kullanılacaktır:

    ```dart
    enum Status {
      active(1),
      inactive(2),
      pending(3);

      const Status(this.code);

      @enumValue
      final int code;
    }

    @collection
    class Task {
      Task(this.id);

      final int id;

      Status? status; // 1, 2 veya 3 olarak depolanır
    }
    ```

    `@enumValue` için desteklenen tipler:
    - `byte` - tek bayt olarak depolanır
    - `short` - 16-bit tamsayı olarak depolanır
    - `int` - 32-bit tamsayı olarak depolanır
    - `String` - metin olarak depolanır

    ```dart
    // String tabanlı enum örneği
    enum Priority {
      low('LOW'),
      medium('MEDIUM'),
      high('HIGH');

      const Priority(this.name);

      @enumValue
      final String name;
    }
    ```

  </Tab>
</Tabs>

<Callout type="info" title="Isar v3'ten Geçiş">
  Isar v3'teki `@enumerated` ve `@Enumerated(EnumType.ordinal/name)`
  annotation'ları artık mevcut değildir. Ordinal depolama için düz enum'ları
  veya özel değerler için `@enumValue` kullanın.
</Callout>

### Gömülü Nesneler

```dart
@embedded
class Address {
  String? street;
  String? city;
  String? country;
}

@collection
class Person {
  Person(this.id);

  final int id;

  String? name;

  Address? address;

  List<Address>? addresses;
}
```

## Id'ler

Her koleksiyon nesneleri benzersiz tanımlamak için bir `Id` alanına ihtiyaç duyar.

```dart
@collection
class User {
  User(this.id);

  final int id;

  String? name;
}
```

<Callout type="info">
  Otomatik artan ID'ler için, ekleme sırasında `collection.autoIncrement()` metodunu kullanın:
  ```dart
  isar.write((isar) {
    final user = User(isar.users.autoIncrement());
    isar.users.put(user);
  });
  ```
</Callout>

### Özel ID'ler

```dart
@collection
class User {
  User(this.id);

  final int id; // ID'yi siz yönetirsiniz

  String? name;
}
```

## Alan Anotasyonları

### @Index

Sorgu performansını iyileştirmek için indeks oluşturun:

```dart
@collection
class User {
  User(this.id);

  final int id;

  @Index()
  String? email;

  @Index(type: IndexType.value)
  String? username;

  @Index(caseSensitive: false)
  String? name;
}
```

### @Ignore

Alanları depolamadan hariç tutun:

```dart
@collection
class User {
  User(this.id);

  final int id;

  String? name;

  @ignore
  String? temporaryData; // Saklanmaz
}
```

### @Name

Veritabanında alan adını değiştirin:

```dart
@collection
class User {
  User(this.id);

  final int id;

  @Name("user_name")
  String? name;
}
```

### @Size

String boyutunu sınırlandırın:

```dart
@collection
class User {
  User(this.id);

  final int id;

  @Size(max: 100)
  String? shortText;

  @Size(max: 1000)
  String? longText;
}
```

## Bileşik İndeksler

Birden fazla alan üzerinde indeks oluşturun:

```dart
@collection
@Index(composite: ['lastName', 'age'])
class User {
  User(this.id);

  final int id;

  String? firstName;

  String? lastName;

  int? age;
}
```

## İlişkileri Modellemek

Isar Plus v4, çalışma zamanı link tipleri yerine gömülü nesneler ve açık ID alanlarıyla ilişkileri modeller. Depodan alınmış örnekler görmek için [İlişkiler](./relationships) sayfasına göz atın.

## Migration

Isar çoğu durumda şema geçişlerini otomatik yönetir:

- Yeni alan eklemek
- Alan kaldırmak
- Alan türünü değiştirmek (veri kaybıyla)
- İndeks eklemek/kaldırmak

<Callout type="error">
  Var olan bir alanın türünü değiştirmek, o alan için veri kaybına yol açar.
</Callout>

## Sonraki Adımlar

<Cards>
  <Card title="CRUD İşlemleri" href="/docs/crud">
    Veriyi oluşturmayı, okumayı, güncellemeyi ve silmeyi öğrenin
  </Card>
  <Card title="İndeksler" href="/docs/indexes">
    Sorgularınızı indekslerle optimize edin
  </Card>
  <Card title="Sorgular" href="/docs/queries">
    Güçlü sorgular oluşturun
  </Card>
</Cards>
