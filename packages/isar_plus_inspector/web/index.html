<!DOCTYPE html>
<html>
  <head>
    <base href="$FLUTTER_BASE_HREF" />

    <meta charset="UTF-8" />
    <meta content="IE=Edge" http-equiv="X-UA-Compatible" />
    <meta name="description" content="Isar Plus Inspector" />

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content="Isar Plus Inspector" />
    <link rel="apple-touch-icon" href="https://isarplus.ahmetaydin.dev/icon-256x256.png" />
    <link
      rel="icon"
      type="image/png"
      href="https://isarplus.ahmetaydin.dev/icon-256x256.png"
    />

    <title>Isar Plus Inspector</title>
    <link rel="manifest" href="manifest.json" />
    
    <style>
      body {
        background: #1a1c1e;
      }

      #loader {
        position: absolute;
        display: grid;
        grid-auto-flow: row;
        row-gap: 20px;
        justify-items: center;
        left: 50%;
        top: 50%;
        transform: translate(-50%, calc(-50% + 12pt));
        z-index: 5000;
      }

      #loader img {
        width: 120px;
        animation: cubic-bezier(0.74, 0.03, 0.37, 0.96) spin 1.5s infinite;
      }

      #loader #loader-info-text {
        font-family: sans-serif;
        font-size: 12pt;
        color: #fff;
        text-align: center;
      }

      #loader.hide {
        animation: fade 0.5s;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        90% {
          transform: rotate(720deg);
        }
        100% {
          transform: rotate(720deg);
        }
      }

      @keyframes fade {
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
        }
      }
    </style>
  </head>

  <body>
    <section id="loader">
      <img src="assets/assets/logo.png" alt="Isar Logo" />
      <span id="loader-info-text"></span>
    </section>
    
    <script src="flutter_bootstrap.js" async></script>
    
    <script>
      window.addEventListener("load", () => {
        const loadingContainer = document.querySelector("#loader");
        const loading = document.querySelector("#loader-info-text");
        loading.textContent = "Loading entrypoint...";
      
        _flutter.loader.load({
          onEntrypointLoaded: async (engineInitializer) => {
            loading.textContent = "Initializing engine...";
            const appRunner = await engineInitializer.initializeEngine();

            loading.textContent = "Running app...";
            await appRunner.runApp();

            loadingContainer.classList.add("hide");
            window.setTimeout(() => {
              loadingContainer.remove();
            }, 500);
          }
        });
      });
    </script>
  </body>
</html>